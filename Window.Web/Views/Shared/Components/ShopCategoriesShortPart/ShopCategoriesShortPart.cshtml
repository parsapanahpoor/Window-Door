@model List<Window.Domain.ViewModels.Site.Shop.Landing.ShopCategoriesDTO>

<div class="side-menu">

    <div class="logo-nav-res dt-sl text-center">
        <a href="#">
            <img src="assets/img/logo.png" alt="">
        </a>
    </div>

    <div class="search-box-side-menu dt-sl text-center mt-2 mb-3">
        <form action="">
            <input type="text" name="s" placeholder="جستجو کنید...">
            <i class="mdi mdi-magnify"></i>
        </form>
    </div>

    <ul class="navbar-nav dt-sl">

        @if (Model != null && Model.Any())
        {
            foreach (var firstCategories in Model.Where(p => !p.ParentId.HasValue).OrderBy(p => p.Priority))
            {
                <li class="sub-menu">
                    <a asp-action="FilterProducts"
                       asp-area=""
                       asp-controller="ShopProduct"
                       asp-route-shopCategories="@firstCategories.ShopCategoryId">@firstCategories.ShopCategoryTitle</a>
                    <ul>

                        @if (Model.Where(s => s.ParentId.HasValue && s.ParentId == firstCategories.ShopCategoryId) != null &&
                       Model.Where(s => s.ParentId.HasValue && s.ParentId == firstCategories.ShopCategoryId).Any())
                        {
                            foreach (var secondCategories in Model.Where(s => s.ParentId.HasValue && s.ParentId == firstCategories.ShopCategoryId).OrderBy(p => p.Priority))
                            {
                                <li class="sub-menu">
                                    <a asp-action="FilterProducts"
                                       asp-area=""
                                       asp-controller="ShopProduct"
                                       asp-route-shopCategories="@secondCategories.ShopCategoryId">@secondCategories.ShopCategoryTitle</a>
                                    <ul>

                                        @if (Model.Where(t => t.ParentId.HasValue && t.ParentId == secondCategories.ShopCategoryId) != null &&
                                       Model.Where(t => t.ParentId.HasValue && t.ParentId == secondCategories.ShopCategoryId).Any())
                                        {
                                            foreach (var thirdCategories in Model.Where(t => t.ParentId.HasValue && t.ParentId == secondCategories.ShopCategoryId).OrderBy(p => p.Priority))
                                            {
                                                <li>
                                                    <a asp-action="FilterProducts"
                                                       asp-area=""
                                                       asp-controller="ShopProduct"
                                                       asp-route-shopCategories="@thirdCategories.ShopCategoryId">@thirdCategories.ShopCategoryTitle</a>
                                                </li>
                                            }
                                        }

                                    </ul>
                                </li>
                            }
                        }

                    </ul>
                </li>

            }
        }

    </ul>
</div>
